# MPIR Visualizer

This is a single-page HTML/JS tool for visualizing MPIR (Multi-Party Intermediate Representation) graphs generated by the MPLang compiler. It helps developers and auditors understand the lineage of operators, how data flows between different parties, and how security logic is applied.

## Features

- **Graph Visualization**: Renders the MPIR as a directed graph.
- **Multi-Party View**: Groups nodes into containers based on the party executing them (e.g., P0, P1, TEE).
- **Security Highlighting**:
    - Special shapes and colors for critical security operators like `tee.quote_gen` and `tee.quote_verify`.
    - Highlights `reveal` operations as security-sensitive points of interest.
- **Risk Analysis**: Automatically detects and flags potential security risks, such as data being sent to a TEE party from an unverified source.
- **Interactive Exploration**: Hover over nodes to see detailed tooltips with their ID, operator type, party, and attributes.
- **Exporting**: Export the graph view as a PNG or SVG image, or export the raw graph data as a JSON file.

## How to Use

1.  **Open `index.html`**: Open the `mplang/tools/visualizer/index.html` file in a modern web browser.
2.  **Generate an MPIR Dump**: Use the MPLang compiler to dump a `GraphProto` to a JSON file. A sample `test_graph.json` is included in this directory for demonstration.
3.  **Load the File**: Click the "Load MPIR JSON" file input button and select the JSON file you generated.
4.  **Explore**: The graph will be rendered on the screen.
    - Pan and zoom to navigate the graph.
    - Hover over nodes to view details.
    - Observe the party containers and any highlighted risks.
5.  **Export**: Use the buttons at the top to export your graph.

## Visual Legend

- **Nodes**: Each node represents an operation (`op_type`).
- **Edges**: Arrows represent the flow of data between operations.
- **Party Containers**: Grey boxes group operations by the party that executes them.
- **Party Colors**: Nodes are colored based on their party.
- **Security Operators**:
    - `tee.quote_gen`: A purple diamond.
    - `tee.quote_verify`: A purple star.
    - `reveal`: A node with a thick gold border.
- **Risk Highlighting**:
    - **Red, Dashed Edge**: Indicates a potentially unverified data transfer to a TEE. Hover over the source node for more details.

This tool is designed to be used locally and requires no backend or internet connection after the initial page load.
